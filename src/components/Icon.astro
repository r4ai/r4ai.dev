---
import Iconify from "@iconify/iconify";

interface Props {
  icon: string;
  class?: string;
}

const props = Astro.props;

const getIconSvg = async (icon: string) => {
  await Iconify.loadIcon(icon);

  const svgPath = Iconify.getIcon(icon)?.body;
  if (!svgPath) throw new Error(`Icon ${icon} not found`);

  return (
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="none" style="width:100%">' +
    svgPath +
    "</svg>"
  );
};
---

<div set:html={await getIconSvg(props.icon)} class={props.class} />
